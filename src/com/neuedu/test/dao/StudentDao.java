package com.neuedu.test.dao;import com.neuedu.test.pojo.Student;import java.sql.*;import java.util.ArrayList;import java.util.List;/** * Created by admin on 2020/2/18. */public class StudentDao implements IsStudentDao{    String url="jdbc:mysql://localhost:3306/dog?useUnicode=true&characterEncoding=utf8";    String username="root";    String password="12345";    @Override    public List<Student> Query() {        //创建一个List来放数据        List<Student> list = new ArrayList<>();        Connection con=null;        PreparedStatement pstat=null;        ResultSet res=null;        try {            Class.forName("com.mysql.jdbc.Driver");            con = DriverManager.getConnection(url,username,password);            pstat = con.prepareStatement("select id,name,age,garden from dog1");            res = pstat.executeQuery();            while (res.next()){                //创建一个学生对象，加入到Student中                Student student = new Student();                student.setId(res.getInt("id"));                student.setName(res.getString("name"));                student.setAge(res.getInt("age"));                student.setGarden(res.getInt("garden"));                list.add(student);            }        } catch (ClassNotFoundException e) {            e.printStackTrace();        } catch (SQLException e) {            e.printStackTrace();        }finally {            //关闭资源文件            try {                if (res!=null)                    res.close();                if (pstat!=null)                    pstat.close();                if (con!=null)                    con.close();            } catch (SQLException e) {                e.printStackTrace();            }        }        return list;    }    @Override    public int add(Student student) {        int i =0;        Connection con=null;        PreparedStatement pstat=null;        try {            //加载            Class.forName("com.mysql.jdbc.Driver");            con = DriverManager.getConnection(url, username, password);            //写java语句            pstat = con.prepareStatement("insert into dog1 (name,age,garden) VALUES(?,?,?)");            //设置问号的值            pstat.setString(1,student.getName());            pstat.setInt(2,student.getAge());            pstat.setInt(3,student.getGarden());             i = pstat.executeUpdate();        } catch (ClassNotFoundException e) {            e.printStackTrace();        } catch (SQLException e) {            e.printStackTrace();        }finally {            try {                if (pstat!=null)                     pstat.close();                if (con!=null)                    con.close();            } catch (SQLException e) {                e.printStackTrace();            }        }        return i;    }    @Override    public int Update(Student student) {        int i=0;        Connection con=null;        PreparedStatement pstat=null;        try {            //加载            Class.forName("com.mysql.jdbc.Driver");            con = DriverManager.getConnection(url, username, password);            //写java语句            pstat = con.prepareStatement("update dog1 set name=?,age=?,garden=? WHERE id = ?");            //设置问号的值            pstat.setString(1,student.getName());            pstat.setInt(2,student.getAge());            pstat.setInt(3,student.getGarden());            pstat.setInt(4,student.getId());             i = pstat.executeUpdate();        } catch (ClassNotFoundException e) {            e.printStackTrace();        } catch (SQLException e) {            e.printStackTrace();        }finally {            try {                if (pstat!=null)                    pstat.close();                if (con!=null)                    con.close();            } catch (SQLException e) {                e.printStackTrace();            }        }        return i;    }    @Override    public int Del(int id) {        int i=0;        Connection con=null;        PreparedStatement pstat=null;        try {            //加载            Class.forName("com.mysql.jdbc.Driver");            con = DriverManager.getConnection(url, username, password);            //写java语句            pstat = con.prepareStatement("DELETE FROM dog1 WHERE id=?");            //设置问号的值            pstat.setInt(1,id);            i = pstat.executeUpdate();        } catch (ClassNotFoundException e) {            e.printStackTrace();        } catch (SQLException e) {            e.printStackTrace();        }finally {            try {                if (pstat!=null)                    pstat.close();                if (con!=null)                    con.close();            } catch (SQLException e) {                e.printStackTrace();            }        }        return i;    }    @Override    public Student queryOne(int id) {        return null;    }}